<!-- Testimonials Section -->
<section class="cus-testimonials-section">
  <div class="page-width cus-container">
    <div class="cus-testimonials-header">
      <p class="cus-testimonials-label">{{ section.settings.section_subtitle }}</p>
      <h2 class="cus-testimonials-title">{{ section.settings.section_title }}</h2>
    </div>

    <div class="estimonials-slider" id="testimonialsSlider">
      <!-- Profile Images Grid -->
      <div class="cus-profiles-grid">
        {% for block in section.blocks %}
          <div class="cus-profile-image {% if forloop.first %}cus-active{% endif %}" data-slide="{{ forloop.index0 }}">
            {% if block.settings.image %}
              <img src="{{ block.settings.image | img_url: '80x80' }}" alt="{{ block.settings.name }}" loading="lazy">
            {% else %}
              <div class="cus-profile-placeholder">{{ block.settings.name | slice: 0 }}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <!-- Testimonial Content -->
      <div class="cus-testimonial-content">
        <div class="cus-testimonial-slider-wrapper">
          {% for block in section.blocks %}
            <div class="cus-testimonial-slide {% if forloop.first %}cus-active{% endif %}" data-slide="{{ forloop.index0 }}">
              <div class="cus-quote-icon"><img src="https://cdn.shopify.com/s/files/1/0659/1073/4938/files/fi_7350737.png?v=1753123689" alt="“" loading="lazy"></div>
              <h3 class="cus-testimonial-quote">{{ block.settings.quote }}</h3>
              <p class="cus-testimonial-description">{{ block.settings.description }}</p>
              <div class="cus-testimonial-author">
                <p class="cus-author-name">{{ block.settings.name }}</p>
                <p class="cus-author-title">{{ block.settings.title }}</p>
              </div>
              <div class="cus-testimonial-rating">
                {% for i in (1..5) %}
                  <span class="cus-star"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 512 512" fill="white">
              <path d="M256 394.6l-148.7 90.7 39.8-172.4-133.1-115.2 175.4-15.1L256 30.4l66.6 152.2 175.4 15.1-133.1 115.2 39.8 172.4z"/>
            </svg></span>
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        </div>

        <!-- Navigation Controls -->
        <div class="cus-slider-controls">
          <button class="cus-slider-btn cus-prev-btn" id="prevBtn">‹</button>
          <div class="cus-slider-dots">
            {% for block in section.blocks %}
              <span class="cus-dot {% if forloop.first %}cus-active{% endif %}" data-slide="{{ forloop.index0 }}"></span>
            {% endfor %}
          </div>
          <button class="cus-slider-btn cus-next-btn" id="nextBtn">›</button>
        </div>
      </div>

      <!-- CTA Button -->
      {% if section.settings.cta_text and section.settings.cta_url %}
        <div class="cus-testimonials-cta">
          <a href="{{ section.settings.cta_url }}" class="cus-cta-button">
            {{ section.settings.cta_text }}
            <span class="cus-cta-arrow">→</span>
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<style>
.cus-testimonials-section {
  padding: 40px 0;
  min-height: 400px;
}

.cus-container {
  max-width: 1300px;
  margin: 0 auto;
}

.cus-testimonials-header {
  text-align: center;
  margin-bottom: 40px;
}

.cus-testimonials-label {
  font-size: 14px;
  color: #2D2D2E;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 10px;
}

.cus-testimonials-title {
  font-size: 48px;
  font-weight: 700;
  color: #031E5F;
  margin: 0;
  line-height: 1.2;
  text-align: center;
   width: 100%;
  
}

.cus-testimonials-slider {
  position: relative;
}

.cus-profiles-grid {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  grid-template-rows: repeat(2, 140px);
  gap: 10px;
  margin-top: 100px;
}

/* Profile image card */
.cus-profile-image {
  width: 100%;
  max-width: 125px;
  height: 200px;
  border-radius: 5px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  opacity: 0.8;
  position: relative;
}

/* First row: automatic placement */
.cus-profile-image:nth-child(-n+9) {
  grid-row: 1;
}

/* Second row: manual column placement */
.cus-profile-image:nth-child(10) {
  grid-row: 2;
  grid-column: 1;
}
.cus-profile-image:nth-child(11) {
  grid-row: 2;
  grid-column: 2;
}
.cus-profile-image:nth-child(12) {
  grid-row: 2;
  grid-column: 8;
}
.cus-profile-image:nth-child(13) {
  grid-row: 2;
  grid-column: 9;
}

/* Different margin-top values to create varied vertical positioning */
.cus-profile-image:nth-child(1) { margin-top: 0; }
.cus-profile-image:nth-child(2) { margin-top: -60px; }
.cus-profile-image:nth-child(3) { margin-top: 10px; }
.cus-profile-image:nth-child(4) { margin-top: -60px; }
.cus-profile-image:nth-child(5) { margin-top: 0; }
.cus-profile-image:nth-child(6) { margin-top: -60px; }
.cus-profile-image:nth-child(7) { margin-top: 10px; }
.cus-profile-image:nth-child(8) { margin-top: -60px; }
.cus-profile-image:nth-child(9) { margin-top: 0; }
.cus-profile-image:nth-child(10) { margin-top: 60px; }
.cus-profile-image:nth-child(11) { margin-top: 0; }
.cus-profile-image:nth-child(12) { margin-top: 0; }
.cus-profile-image:nth-child(13) { margin-top: 60px; }

/* Featured image indicator (like the blue checkmark) */
.cus-profile-image.cus-active::after {
  content: "✓";
  position: absolute;
  top: -8px;
  right: -8px;
  width: 24px;
  height: 24px;
  background: #3b82f6;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
  border: 1px solid #fff;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
  border-radius: 5px;
}

.cus-profile-image.cus-active {
  opacity: 1;
  border-color: #6366f1;
  box-shadow: 0 8px 30px rgba(99, 102, 241, 0.25);
  z-index: 1;
  position: relative;
  overflow: visible;
  border: 3px solid #6366f1;
}

.cus-profile-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.cus-profile-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  color: white;
  font-weight: 600;
  font-size: 24px;
}

/* Testimonial Content */
.cus-testimonial-content {
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
  position: relative;
}

.cus-testimonial-slider-wrapper {
  position: relative;
  height: 300px;
  overflow: hidden;
}

.cus-testimonial-slide {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  opacity: 0;
  transition: all 0.5s ease;
  pointer-events: none;
}

.cus-testimonial-slide.cus-active {
  opacity: 1;
  pointer-events: auto;
}

.cus-quote-icon {
  font-size: 80px;
  color: #6366f1;
  line-height: 1;
  margin-bottom: 20px;
  font-family: serif;
}

.cus-testimonial-quote {
  font-size: 32px;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 20px;
  line-height: 1.3;
}

.cus-testimonial-description {
  font-size: 18px;
  color: #64748b;
  line-height: 1.6;
  margin-bottom: 30px;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.cus-testimonial-author {
  margin-bottom: 20px;
}

.cus-author-name {
  font-size: 18px;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 5px;
}

.cus-author-title {
  font-size: 16px;
  color: #6366f1;
  margin: 0;
}
.cus-testimonial-rating {
  display: flex;
  justify-content: center;
  gap: 5px;
  margin-bottom: 20px;
}

.cus-star {
  color: #fbbf24; /* Golden yellow color */
  font-size: 20px;
  line-height: 1;
  display: inline-block;
}


/* Slider Controls */
.cus-slider-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 30px;
  margin-top: 40px;
}
button#prevBtn {
  transform: translate(-350px, 160px);
}

button#nextBtn {
  transform: translate(350px, 160px);
}
.cus-slider-btn {
  background: white;
  border: 2px solid #e2e8f0;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 24px;
  color: #64748b;
  transition: all 0.3s ease;
  position: absolute;
  top: 0;
}


.cus-slider-btn:hover {
  border-color: #6366f1;
  color: #6366f1;
  transform: scale(1.1);
}

.cus-slider-dots {
  display: flex;
  gap: 10px;
}

.cus-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #cbd5e1;
  cursor: pointer;
  transition: all 0.3s ease;
}

.cus-dot.cus-active {
  background: #6366f1;
  transform: scale(1.2);
}

/* CTA Button */
.cus-testimonials-cta {
  text-align: center;
  margin-top: 50px;
}

.cus-cta-button {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: white;
    color: #1e293b;
    padding: 10px 20px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 400;
    font-size: 14px;
    transition: all 0.3s ease;
    border: 1px solid #1e293b;
}

.cus-cta-button:hover {
  background: transparent;
  color: #1e293b;
  box-shadow: 0 10px 30px rgba(30, 41, 59, 0.2);
}

.cus-cta-arrow {
  transition: transform 0.3s ease;
}

.cus-cta-button:hover .cus-cta-arrow {
  transform: translateX(5px);
}
  /* Mobile Responsive - maintain desktop design principles */
  @media (max-width: 768px) {
      .cus-testimonials-section {
          padding: 40px 15px;
      }

      .cus-testimonials-title {
          font-size: 36px;
          line-height: 1.1;
      }

      .cus-profiles-grid {
          grid-template-columns: repeat(5, 1fr);
          grid-template-rows: repeat(3, 120px);
          gap: 8px;
          margin-top: 60px;
          max-width: 500px;
          margin-left: auto;
          margin-right: auto;
      }

      .cus-profile-image {
          width: 100%;
          max-width: 90px;
          height: 160px;
      }

      /* Adjust grid positioning for mobile */
      .cus-profile-image:nth-child(-n+5) {
          grid-row: 1;
      }
      .cus-profile-image:nth-child(6), 
      .cus-profile-image:nth-child(7), 
      .cus-profile-image:nth-child(8) {
          grid-row: 2;
          grid-column: span 1;
      }
      .cus-profile-image:nth-child(6) { grid-column: 2; }
      .cus-profile-image:nth-child(7) { grid-column: 3; }
      .cus-profile-image:nth-child(8) { grid-column: 4; }

      .cus-profile-image:nth-child(9), 
      .cus-profile-image:nth-child(10) {
          grid-row: 3;
      }
      .cus-profile-image:nth-child(9) { grid-column: 1; }
      .cus-profile-image:nth-child(10) { grid-column: 5; }

      /* Maintain staggered heights on mobile */
      .cus-profile-image:nth-child(1) { margin-top: 0; }
      .cus-profile-image:nth-child(2) { margin-top: -40px; }
      .cus-profile-image:nth-child(3) { margin-top: 10px; }
      .cus-profile-image:nth-child(4) { margin-top: -40px; }
      .cus-profile-image:nth-child(5) { margin-top: 0; }
      .cus-profile-image:nth-child(6) { margin-top: -30px; }
      .cus-profile-image:nth-child(7) { margin-top: 0; }
      .cus-profile-image:nth-child(8) { margin-top: -30px; }
      .cus-profile-image:nth-child(9) { margin-top: 40px; }
      .cus-profile-image:nth-child(10) { margin-top: 40px; }

      .cus-testimonial-content {
          margin-top: 40px;
      }

      .cus-testimonial-quote {
          font-size: 24px;
      }

      .cus-testimonial-description {
          font-size: 16px;
          padding: 0 10px;
      }

      .cus-quote-icon img {
          width: 50px;
          height: 50px;
      }

      #prevBtn {
          left: 0;
          top: 0;
      }

      #nextBtn {
          right: 0;
          top: 0;
      }

      .cus-slider-btn {
          width: 40px;
          height: 40px;
          font-size: 20px;
      }
  }

  /* Small mobile screens */
  @media (max-width: 480px) {
      .cus-testimonials-title {
          font-size: 28px;
      }

      .cus-profiles-grid {
          grid-template-columns: repeat(4, 1fr);
          grid-template-rows: repeat(3, 100px);
          gap: 6px;
          max-width: 320px;
      }

      .cus-profile-image {
          max-width: 70px;
          height: 130px;
      }

      /* Adjust grid for smaller screens */
      .cus-profile-image:nth-child(-n+4) {
          grid-row: 1;
      }
      .cus-profile-image:nth-child(5), 
      .cus-profile-image:nth-child(6), 
      .cus-profile-image:nth-child(7) {
          grid-row: 2;
      }
      .cus-profile-image:nth-child(5) { grid-column: 1; }
      .cus-profile-image:nth-child(6) { grid-column: 2; }
      .cus-profile-image:nth-child(7) { grid-column: 3; }

      .cus-profile-image:nth-child(8), 
      .cus-profile-image:nth-child(9) {
          grid-row: 3;
      }
      .cus-profile-image:nth-child(8) { grid-column: 2; }
      .cus-profile-image:nth-child(9) { grid-column: 3; }

      /* Reduce margin variations for small screens */
      .cus-profile-image:nth-child(1) { margin-top: 0; }
      .cus-profile-image:nth-child(2) { margin-top: -30px; }
      .cus-profile-image:nth-child(3) { margin-top: 5px; }
      .cus-profile-image:nth-child(4) { margin-top: -30px; }
      .cus-profile-image:nth-child(5) { margin-top: -20px; }
      .cus-profile-image:nth-child(6) { margin-top: 0; }
      .cus-profile-image:nth-child(7) { margin-top: -20px; }
      .cus-profile-image:nth-child(8) { margin-top: 30px; }
      .cus-profile-image:nth-child(9) { margin-top: 30px; }

        .cus-testimonial-quote {
        font-size: 20px;
        }
        
        .cus-quote-icon img {
        width: 40px;
        height: 40px;
        }
        
        #nextBtn {
        right: 0;
        top: 0;
        }
        button#nextBtn {
        transform: translate(40px, 160px);
        }
        button#prevBtn {
        transform: translate(-40px, 160px);
        }
        #prevBtn {
        left: 0;
        top: 0;
        }
        
        .cus-profile-image.cus-active::after {
        width: 20px;
        height: 20px;
        font-size: 10px;
        top: -6px;
        right: -6px;
        }
        }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const slider = {
    currentSlide: 0,
    totalSlides: document.querySelectorAll('.cus-testimonial-slide').length,
    autoPlayInterval: null,
    autoPlayDelay: 5000,

    init() {
      this.bindEvents();
      this.startAutoPlay();
    },

    bindEvents() {
      // Navigation buttons
      document.getElementById('prevBtn').addEventListener('click', () => this.prevSlide());
      document.getElementById('nextBtn').addEventListener('click', () => this.nextSlide());

      // Dot navigation
      document.querySelectorAll('.cus-dot').forEach((dot, index) => {
        dot.addEventListener('click', () => this.goToSlide(index));
      });

      // Profile image clicks
      document.querySelectorAll('.cus-profile-image').forEach((profile, index) => {
        profile.addEventListener('click', () => this.goToSlide(index));
      });

      // Pause auto-play on hover
      const sliderElement = document.getElementById('testimonialsSlider');
      sliderElement.addEventListener('mouseenter', () => this.stopAutoPlay());
      sliderElement.addEventListener('mouseleave', () => this.startAutoPlay());
    },

    goToSlide(slideIndex) {
      // Remove active classes
      document.querySelectorAll('.cus-testimonial-slide, .cus-dot, .cus-profile-image').forEach(el => {
        el.classList.remove('cus-active');
      });

      // Add active classes
      const targetSlide = document.querySelector(`[data-slide="${slideIndex}"].cus-testimonial-slide`);
      const targetDot = document.querySelector(`[data-slide="${slideIndex}"].cus-dot`);
      const targetProfile = document.querySelector(`[data-slide="${slideIndex}"].cus-profile-image`);

      if (targetSlide && targetDot && targetProfile) {
        targetSlide.classList.add('cus-active');
        targetDot.classList.add('cus-active');
        targetProfile.classList.add('cus-active');
        this.currentSlide = slideIndex;
      }
    },

    nextSlide() {
      const nextIndex = (this.currentSlide + 1) % this.totalSlides;
      this.goToSlide(nextIndex);
    },

    prevSlide() {
      const prevIndex = (this.currentSlide - 1 + this.totalSlides) % this.totalSlides;
      this.goToSlide(prevIndex);
    },

    startAutoPlay() {
      this.stopAutoPlay();
      this.autoPlayInterval = setInterval(() => {
        this.nextSlide();
      }, this.autoPlayDelay);
    },

    stopAutoPlay() {
      if (this.autoPlayInterval) {
        clearInterval(this.autoPlayInterval);
        this.autoPlayInterval = null;
      }
    }
  };

  // Initialize slider if testimonials exist
  if (document.querySelectorAll('.cus-testimonial-slide').length > 0) {
    slider.init();
  }
});
</script>

{% schema %}
{
  "name": "Testimonials Slider",
  "tag": "section",
  "class": "cus-testimonials-section",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Loved by our community"
    },
    {
      "type": "text",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Testimonials"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "Join Our Community"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "CTA Button URL"
    },
    {
      "type": "range",
      "id": "auto_play_speed",
      "label": "Auto Play Speed (seconds)",
      "min": 3,
      "max": 10,
      "step": 1,
      "default": 5
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Profile Image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Customer Name",
          "default": "Customer Name"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Customer Title",
          "default": "Customer Title"
        },
        {
          "type": "text",
          "id": "quote",
          "label": "Main Quote",
          "default": "I feel like I have gotten younger"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Testimonial Description",
          "default": "I simply feel like I have more energy to do everything. This is like a caffeine jolt without any of the side effects. I am hap!"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials Slider",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "name": "Jara nina",
            "title": "Beauty & Wellness Influencer",
            "quote": "I feel like I have gotten younger",
            "description": "I simply feel like I have more energy to do everything. This is like a caffeine jolt without any of the side effects. I am hap!"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "name": "Sarah Johnson",
            "title": "Fitness Enthusiast",
            "quote": "Amazing transformation in just weeks",
            "description": "The results speak for themselves. I've never felt more confident and energized in my daily routine."
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "name": "Mike Chen",
            "title": "Busy Professional",
            "quote": "Perfect solution for my lifestyle",
            "description": "As someone with a hectic schedule, this has been a game-changer for maintaining my health and wellness."
          }
        }
      ]
    }
  ]
}
{% endschema %}