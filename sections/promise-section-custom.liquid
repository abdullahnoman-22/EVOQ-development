<!-- sections/promise-section.liquid -->
<div class="promise-section" style="background-color: {{ section.settings.background_color }}; padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;">
  <div class="page-width promise-container">
    
    {% if section.settings.heading != blank %}
      <h2 class="promise-heading" style="font-size: {{ section.settings.heading_size }}px; color: {{ section.settings.heading_color }};">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="promise-grid">
      
      {% for block in section.blocks %}
        <div class="promise-card" {{ block.shopify_attributes }} style="background-color: {{ block.settings.card_background_color | default: '#ffffff' }};">
          
          {% if block.settings.icon != blank %}
            <div class="promise-icon" style="background: {{ block.settings.icon_background }};">
              <img src="{{ block.settings.icon | img_url: 'master' }}" alt="{{ block.settings.title }}">
            </div>
          {% elsif block.settings.icon_svg != blank %}
            <div class="promise-icon" style="background: {{ block.settings.icon_background }};">
              {{ block.settings.icon_svg }}
            </div>
          {% endif %}

          {% if block.settings.title != blank %}
            <h3 class="promise-title" style="color: {{ section.settings.title_color }};">
              {{ block.settings.title }}
            </h3>
          {% endif %}

          {% if block.settings.description != blank %}
            <p class="promise-description" style="color: {{ section.settings.text_color }};">
              {{ block.settings.description }}
            </p>
          {% endif %}

        </div>
      {% endfor %}

    </div>
  </div>
</div>

{% schema %}
{
  "name": "Promise Section",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "richtext",
      "id": "heading",
      "label": "Section Heading",
      "default": "<h2>Our Promise</h2>"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Heading Size",
      "min": 20,
      "max": 48,
      "step": 2,
      "default": 32
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#2c3e50"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Card Title Color",
      "default": "#2c3e50"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Card Text Color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section Background Color",
      "default": "#e8f0fe"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "promise_item",
      "name": "Promise Item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "placeholder": "Enter promise title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "placeholder": "Enter promise description"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon Image"
        },
        {
          "type": "html",
          "id": "icon_svg",
          "label": "Icon SVG Code",
          "info": "Paste SVG code here if you prefer SVG icons over images"
        },
        {
          "type": "color",
          "id": "icon_background",
          "label": "Icon Background Color",
          "default": "#f0f8ff"
        },
        {
          "type": "color",
          "id": "card_background_color",
          "label": "Card Background Color",
          "default": "#ffffff",
          "info": "Background color for this specific promise card"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Promise Section",
      "blocks": [
        {
          "type": "promise_item",
          "settings": {
            "title": "Results Driven & Effective",
            "description": "We always use Hydrolyzed Collagen at high per serve dosages meaning you get results in weeks, not months",
            "icon_background": "#f0f8ff",
            "card_background_color": "#ffffff"
          }
        },
        {
          "type": "promise_item",
          "settings": {
            "title": "Delicious Taste",
            "description": "We always use Hydrolyzed Collagen at high per serve dosages meaning you get results in weeks, not months",
            "icon_background": "#f0f8ff",
            "card_background_color": "#f8f9fa"
          }
        },
        {
          "type": "promise_item",
          "settings": {
            "title": "Scientifically Proven",
            "description": "We always use Hydrolyzed Collagen at high per serve dosages meaning you get results in weeks, not months",
            "icon_background": "#f0f8ff",
            "card_background_color": "#e8f5e8"
          }
        },
        {
          "type": "promise_item",
          "settings": {
            "title": "Still not Convinced?",
            "description": "We always use Hydrolyzed Collagen at high per serve dosages meaning you get results in weeks, not months",
            "icon_background": "#f0f8ff",
            "card_background_color": "#fff3e0"
          }
        }
      ]
    }
  ]
}
{% endschema %}

<style>
/* assets/promise-section.css */

.promise-section {
  width: 100%;
  margin: 56px 0;
}

.promise-container {
  margin: 0 auto;
}

.promise-heading {
  text-align: center;
  margin-bottom: 40px;
  font-size: 36px;
  font-weight: 400;
  color: #001F5F;
  line-height: 44px;
  font-family: 'Inter' !important;
  max-width: 800px;
  margin: 0 auto;
}

.promise-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  margin: 0 auto;
}

.promise-card {
  /* Removed static background color - now controlled by inline style */
  border-radius: 12px;
  padding: 30px 20px;
  text-align: center;
  transition: transform 0.3s ease, background-color 0.3s ease;
  position: relative;
  overflow: hidden;
}

.promise-icon {
  width: 100px;
  height: 100px;
  margin: 0 auto 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 24px;
  transition: transform 0.3s ease;
  border: 1px solid #D0D5DD;
}

.promise-icon img {
  width: 100px;
  height: 100px;
  object-fit: contain;
}

.promise-icon svg {
  width: 72px;
  height: 72px;
  fill: currentColor;
}

.promise-title {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 10px;
  line-height: 30px;
  color: #000000;
  font-family: 'Inter' !important;
}

.promise-description {
  font-size: 14px;
  line-height: 24px;
  margin: 0;
  color: #344054;
  font-family: 'Inter' !important;
  font-weight: 400;
}

/* Mobile Styles */
@media (max-width: 768px) {
  .promise-container {
    padding: 0 15px;
  }
  
  .promise-grid {
    grid-template-columns: 1fr;
    gap: 15px;
  }
  .promise-section{
  padding: 1px 0 30px !important;
}
  .promise-card {
    padding: 25px 15px;
  }
  
  .promise-heading {
    font-size: 30px !important;
    margin-bottom: 30px;
  }
  
  .promise-title {
    font-size: 16px;
  }
  
  .promise-description {
    font-size: 14px;
  }
  .promise-icon {
    width: 80px;
    height: 80px;
    border-radius: 10px;
}
}

/* Tablet Styles */
@media (max-width: 1024px) and (min-width: 769px) {
  .promise-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
  }
  
  .promise-card {
    padding: 28px 18px;
  }
}

/* Animation for section load */
.promise-card {
  opacity: 0;
  animation: fadeInUp 0.6s ease forwards;
}

.promise-card:nth-child(1) { animation-delay: 0.1s; }
.promise-card:nth-child(2) { animation-delay: 0.2s; }
.promise-card:nth-child(3) { animation-delay: 0.3s; }
.promise-card:nth-child(4) { animation-delay: 0.4s; }

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .promise-card {
    /* Background color will be controlled by inline styles */
    box-shadow: 0 2px 10px rgba(255, 255, 255, 0.1);
  }
  
  .promise-card:hover {
    box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
  }
}

/* Print styles */
@media print {
  .promise-section {
    break-inside: avoid;
  }
  
  .promise-card {
    box-shadow: none;
    border: 1px solid #ddd;
    break-inside: avoid;
  }
  
  .promise-card:hover {
    transform: none;
  }
}
</style>